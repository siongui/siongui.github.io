<!DOCTYPE html>
<html lang="en">
<head><script data-ad-client="ca-pub-0436733829999264" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta charset="utf-8">
  <title>[AngularJS] Add Tooltip to Every Word</title>
  <meta name="keywords" content="AngularJS,JavaScript,Directives,Regular Expression,Tooltip"/>
  <meta name="description" content="Add tooltip to every word via AngularJS. Used in Pāli Tipiṭaka."/>
  <meta name="author" content="Siong-Ui Te"/><meta property="og:title" content="[AngularJS] Add Tooltip to Every Word" />    <meta property="og:image" content="/./extra/Dharma_wheel.svg" /><meta property="og:description" content="Add tooltip to every word via AngularJS. Used in Pāli Tipiṭaka." /><meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" href="/./extra/Dharma_wheel.png" />
  <link rel="manifest" href="/manifest.json" />

  <link rel="stylesheet" type="text/css" href="/./theme/css/style.css">
</head>
<body>

<div>
<nav class="nav">
  <div class="nav-left">
    <a class="nav-item" href="/">Theory and Practice</a>
  </div>

  <label for="menu-toggle" class="nav-toggle">&equiv;</label>
  <input type="checkbox" id="menu-toggle" class="is-hidden"/>

  <div class="nav-right nav-menu">
<a class="nav-item" href="/pages/about.html">About</a>
    <a class="nav-item" href="/archives.html">Archives</a>
    <a class="nav-item" href="/categories.html">Categories</a>
    <a class="nav-item" href="/tags.html">Tags</a>
    <a class="nav-item" href="/authors.html">Authors</a>
    <!--TODO: add links for Links(optional), and RSS -->

    <span class="vertical-divider"></span>

        <a class="nav-item" href="/zh/">中文</a>
        <a class="nav-item" href="/th/">ไทย</a>
  </div>
</nav><gcse:search></gcse:search><main role="main" class="article">
  <article>
    <header>
      <h1>
        <a href="/2016/05/31/angularjs-ng-add-tooltip-to-every-word/"
           rel="bookmark"
           title="Permalink to [AngularJS] Add Tooltip to Every Word">
          [AngularJS] Add Tooltip to Every Word
        </a>
      </h1>
    </header>
<aside><time datetime="2016-05-31T22:26:00+08:00">
    May 31, 2016
  </time></aside>
    <aside><div class="edit-on-github"><a href="https://github.com/siongui/userpages/tree/master/content/articles/2016/05/31/angularjs-ng-add-tooltip-to-every-word%25en.rst">Edit on Github</a></div></aside>
    <hr>

    <div class="main-content"><p>Add <a class="reference external" href="https://www.google.com/search?q=javascript+tooltip">tooltip</a> to every word via <a class="reference external" href="https://angularjs.org/">AngularJS</a>.</p>
<p class="align-center rubric"><a class="reference external" href="/code/angularjs-wrap-words/index.html">Demo</a></p>
<p>Real world application is <a class="reference external" href="http://tipitaka.sutta.org/">Pāli Tipiṭaka</a>.</p>
<p>Source code:</p>
<figure class="github-file">
            <figcaption>
              <a href="https://github.com/siongui/userpages/blob/master/content/code/angularjs-wrap-words/index.html">index.html</a> |
              <a href="https://github.com/siongui/userpages">repository</a> |
              <a href="https://raw.githubusercontent.com/siongui/userpages/master/content/code/angularjs-wrap-words/index.html">view raw</a>
            </figcaption><div class="code-file">
            <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">&quot;demoWrapEveryWord&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>AngularJS Wrap Every Words Demo<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;tooltip.css&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">wrap-every-word</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>1. Tena samayena buddho bhagavā verañjāyaṃ viharati naḷerupucimandamūle mahatā bhikkhusaṅghena saddhiṃ pañcamattehi bhikkhusatehi. Assosi kho verañjo brāhmaṇo – ‘‘samaṇo khalu, bho, gotamo sakyaputto sakyakulā pabbajito verañjāyaṃ viharati naḷerupucimandamūle mahatā bhikkhusaṅghena saddhiṃ pañcamattehi bhikkhusatehi. Taṃ kho pana bhavantaṃ gotamaṃ evaṃ kalyāṇo kittisaddo abbhuggato – ‘itipi so bhagavā arahaṃ sammāsambuddho vijjācaraṇasampanno sugato lokavidū anuttaro purisadammasārathi satthā devamanussānaṃ buddho bhagavā [bhagavāti (syā.), dī. ni. 1.157, abbhuggatākārena pana sameti]. So imaṃ lokaṃ sadevakaṃ samārakaṃ sabrahmakaṃ sassamaṇabrāhmaṇiṃ pajaṃ sadevamanussaṃ sayaṃ abhiññā sacchikatvā pavedeti. So dhammaṃ deseti ādikalyāṇaṃ majjhekalyāṇaṃ pariyosānakalyāṇaṃ sātthaṃ sabyañjanaṃ; kevalaparipuṇṇaṃ parisuddhaṃ brahmacariyaṃ pakāseti; sādhu kho pana tathārūpānaṃ arahataṃ dassanaṃ hotī’’’ti.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>2.[ito paraṃ yāva pārā. 15-16 padakkhiṇaṃ katvā pakkāmīti pāṭho a. ni. 8.11] Atha kho verañjo brāhmaṇo yena bhagavā tenupasaṅkami; upasaṅkamitvā bhagavatā saddhiṃ sammodi. Sammodanīyaṃ kathaṃ sāraṇīyaṃ vītisāretvā ekamantaṃ nisīdi . Ekamantaṃ nisinno kho verañjo brāhmaṇo bhagavantaṃ etadavoca – ‘‘sutaṃ metaṃ, bho gotama – ‘na samaṇo gotamo brāhmaṇe jiṇṇe vuḍḍhe mahallake addhagate vayoanuppatte abhivādeti vā paccuṭṭheti vā āsanena vā nimantetī’ti. Tayidaṃ, bho gotama, tatheva? Na hi bhavaṃ gotamo brāhmaṇe jiṇṇe vuḍḍhe mahallake addhagate vayoanuppatte abhivādeti vā paccuṭṭheti vā āsanena vā nimanteti? Tayidaṃ, bho gotama, na sampannamevā’’ti.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>‘‘Nāhaṃ taṃ, brāhmaṇa, passāmi sadevake loke samārake sabrahmake sassamaṇabrāhmaṇiyā pajāya sadevamanussāya yamahaṃ abhivādeyyaṃ vā paccuṭṭheyyaṃ vā āsanena vā nimanteyyaṃ. Yañhi, brāhmaṇa, tathāgato abhivādeyya vā paccuṭṭheyya vā āsanena vā nimanteyya, muddhāpi tassa vipateyyā’’ti.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>3. ‘‘Arasarūpo bhavaṃ gotamo’’ti? ‘‘Atthi khvesa, brāhmaṇa, pariyāyo yena maṃ pariyāyena sammā vadamāno vadeyya – ‘arasarūpo samaṇo gotamo’ti. Ye te, brāhmaṇa, rūparasā saddarasā gandharasā rasarasā phoṭṭhabbarasā te tathāgatassa pahīnā ucchinnamūlā tālāvatthukatā anabhāvaṃkatā [anabhāvakatā (sī.) anabhāvaṃgatā (syā.)] āyatiṃ anuppādadhammā. Ayaṃ kho, brāhmaṇa, pariyāyo yena maṃ pariyāyena sammā vadamāno vadeyya – ‘arasarūpo samaṇo gotamo’ti, no ca kho yaṃ tvaṃ sandhāya vadesī’’ti.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;tooltip.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;ngWrapper.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;app.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div></figure>
<figure class="github-file">
            <figcaption>
              <a href="https://github.com/siongui/userpages/blob/master/content/code/angularjs-wrap-words/app.js">app.js</a> |
              <a href="https://github.com/siongui/userpages">repository</a> |
              <a href="https://raw.githubusercontent.com/siongui/userpages/master/content/code/angularjs-wrap-words/app.js">view raw</a>
            </figcaption><div class="code-file">
            <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>


<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;demoWrapEveryWord&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;tooltip&#39;</span><span class="p">,</span> <span class="s1">&#39;wordWrapper&#39;</span><span class="p">]).</span>
  <span class="nx">run</span><span class="p">([</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// nothing to do</span>
  <span class="p">}]);</span>
</pre></div>
</td></tr></table></div></figure>
<figure class="github-file">
            <figcaption>
              <a href="https://github.com/siongui/userpages/blob/master/content/code/angularjs-wrap-words/ngWrapper.js">ngWrapper.js</a> |
              <a href="https://github.com/siongui/userpages">repository</a> |
              <a href="https://raw.githubusercontent.com/siongui/userpages/master/content/code/angularjs-wrap-words/ngWrapper.js">view raw</a>
            </figcaption><div class="code-file">
            <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>


<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;wordWrapper&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;tooltip&#39;</span><span class="p">]).</span>
  <span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;wrapEveryWord&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;wrapStringOfWords&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">wrapStringOfWords</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * wrap every word in ELEMENT and add tooltip to every word.</span>
<span class="cm">     */</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span>
      <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">elm</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">wrapStringOfWords</span><span class="p">.</span><span class="nx">traverse</span><span class="p">(</span><span class="nx">elm</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}]).</span>

  <span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;wrapStringOfWords&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;processStringOfWords&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">processStringOfWords</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * find all words in the element</span>
<span class="cm">     * @param {DOM element}</span>
<span class="cm">     */</span>
    <span class="kd">function</span> <span class="nx">traverse</span><span class="p">(</span><span class="nx">elm</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 1: element node</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">elm</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
          <span class="c1">// recursively call self to process</span>
          <span class="nx">traverse</span><span class="p">(</span><span class="nx">elm</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">// 3: text node</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s*/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
          <span class="c1">// string is not whitespace</span>
          <span class="nx">elm</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">replaceChild</span><span class="p">(</span><span class="nx">processStringOfWords</span><span class="p">.</span><span class="nx">toDom</span><span class="p">(</span><span class="nx">string</span><span class="p">),</span> <span class="nx">elm</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">serviceInstance</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">traverse</span><span class="o">:</span> <span class="nx">traverse</span> <span class="p">};</span>
    <span class="k">return</span> <span class="nx">serviceInstance</span><span class="p">;</span>
  <span class="p">}]).</span>

  <span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;processStringOfWords&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;AddTooltipToElement&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">AddTooltipToElement</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">function</span> <span class="nx">toDom</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// wrap all words in span</span>
      <span class="kd">var</span> <span class="nx">spanContainer</span> <span class="o">=</span> <span class="nx">htmlStr2Dom</span><span class="p">(</span><span class="nx">markInSpan</span><span class="p">(</span><span class="nx">string</span><span class="p">));</span>

      <span class="c1">// add tooltip to every word</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">spanContainer</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">spanContainer</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">tagName</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">tagName</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">tagName</span> <span class="o">&amp;&amp;</span> <span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;span&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">AddTooltipToElement</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">spanContainer</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">htmlStr2Dom</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// @see http://stackoverflow.com/questions/3103962/converting-html-string-into-dom-elements</span>
      <span class="c1">// @see http://stackoverflow.com/questions/888875/how-to-parse-html-from-javascript-in-firefox</span>
      <span class="kd">var</span> <span class="nx">spanContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">);</span>
      <span class="nx">spanContainer</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">string</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">spanContainer</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">markInSpan</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[AaBbCcDdEeGgHhIiJjKkLlMmNnOoPpRrSsTtUuVvYyĀāĪīŪūṀṁṂṃŊŋṆṇṄṅÑñṬṭḌḍḶḷ]+/g</span><span class="p">,</span> <span class="s1">&#39;&lt;span&gt;$&amp;&lt;/span&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">serviceInstance</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">toDom</span><span class="o">:</span> <span class="nx">toDom</span> <span class="p">};</span>
    <span class="k">return</span> <span class="nx">serviceInstance</span><span class="p">;</span>
  <span class="p">}]);</span>
</pre></div>
</td></tr></table></div></figure>
<figure class="github-file">
            <figcaption>
              <a href="https://github.com/siongui/userpages/blob/master/content/code/angularjs-wrap-words/tooltip.js">tooltip.js</a> |
              <a href="https://github.com/siongui/userpages">repository</a> |
              <a href="https://raw.githubusercontent.com/siongui/userpages/master/content/code/angularjs-wrap-words/tooltip.js">view raw</a>
            </figcaption><div class="code-file">
            <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="cm">/* Services */</span>


<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;tooltip&#39;</span><span class="p">,</span> <span class="p">[]).</span>
  <span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;tooltip&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;</span><span class="nv">$rootScope</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="nv">$compile</span><span class="s1">&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nv">$rootScope</span><span class="p">,</span> <span class="nv">$compile</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// init tooltip</span>
    <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="nv">$rootScope.$new</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">isMouseInTooltip</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">scope</span><span class="p">.</span><span class="nx">onmouseenter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// mouse enters tooltip</span>
      <span class="nx">isMouseInTooltip</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scope</span><span class="p">.</span><span class="nx">onmouseleave</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// mouse leaves tooltip</span>
      <span class="nx">isMouseInTooltip</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">hide</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">_left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">_top</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">tooltip</span> <span class="o">=</span> <span class="nv">$compile</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;tooltip&quot; ng-mouseenter=&quot;onmouseenter()&quot; ng-mouseleave=&quot;onmouseleave()&quot;&gt;&lt;/div&gt;&#39;</span><span class="p">)(</span><span class="nx">scope</span><span class="p">);</span>
    <span class="nx">tooltip</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;max-width&#39;</span><span class="p">,</span> <span class="nx">viewWidth</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">);</span>

    <span class="c1">// append tooltip to the end of body element</span>
    <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">append</span><span class="p">(</span><span class="nx">tooltip</span><span class="p">);</span>


    <span class="kd">function</span> <span class="nx">viewWidth</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// FIXME: why -32 here?</span>
      <span class="k">return</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">)</span> <span class="o">-</span> <span class="mi">32</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">setContent</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">tooltip</span><span class="p">.</span><span class="nx">children</span><span class="p">().</span><span class="nx">remove</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">content</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="s1">&#39;In tooltip: content undefined!&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">content</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">tooltip</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">tooltip</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">setPosition</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">_left</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">position</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
      <span class="nx">_top</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">position</span><span class="p">.</span><span class="nx">top</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// move tooltip to the right</span>
      <span class="c1">// (don&#39;t cross the right side of browser inner window)</span>
      <span class="kd">var</span> <span class="nx">_right</span> <span class="o">=</span> <span class="nx">_left</span> <span class="o">+</span> <span class="nx">tooltip</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;offsetWidth&#39;</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">_right</span> <span class="o">&gt;</span> <span class="nx">viewWidth</span><span class="p">()</span> <span class="p">)</span>
        <span class="nx">_left</span> <span class="o">-=</span> <span class="p">(</span><span class="nx">_right</span> <span class="o">-</span> <span class="nx">viewWidth</span><span class="p">());</span>

      <span class="nx">tooltip</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="nx">_left</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">);</span>
      <span class="nx">tooltip</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="nx">_top</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hide</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isMouseInTooltip</span><span class="p">)</span>
        <span class="nx">tooltip</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;-9999px&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">serviceInstance</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">viewWidth</span><span class="o">:</span> <span class="nx">viewWidth</span><span class="p">,</span>
      <span class="nx">isHidden</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="p">(</span><span class="nx">tooltip</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;-9999px&#39;</span><span class="p">);},</span>
      <span class="nx">getLeftSpace</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="nx">_left</span><span class="p">;},</span>
      <span class="nx">getRightSpace</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="nx">viewWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">_left</span> <span class="o">-</span> <span class="nx">tooltip</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;offsetWidth&#39;</span><span class="p">);},</span>
      <span class="nx">setContent</span><span class="o">:</span> <span class="nx">setContent</span><span class="p">,</span>
      <span class="nx">setPosition</span><span class="o">:</span> <span class="nx">setPosition</span><span class="p">,</span>
      <span class="nx">show</span><span class="o">:</span> <span class="nx">show</span><span class="p">,</span>
      <span class="nx">hide</span><span class="o">:</span> <span class="nx">hide</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">serviceInstance</span><span class="p">;</span>
  <span class="p">}]).</span>

  <span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;AddTooltipToElement&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;tooltip&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tooltip</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// when user&#39;s mouse hovers over words,</span>
    <span class="c1">// delay a period of time before look up.</span>
    <span class="kd">var</span> <span class="nx">DELAY_INTERVAL</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// ms</span>

    <span class="kd">var</span> <span class="nx">isMouseInWord</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">onWordMouseOver</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">isMouseInWord</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span>

      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// &#39;this&#39; keyword here refers to raw dom element</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">===</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// mouse is still on word</span>
          <span class="kd">var</span> <span class="nx">word</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
          <span class="nx">tooltip</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span>
            <span class="nx">word</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">word</span> <span class="o">+</span> <span class="s1">&#39;&lt;br&gt;&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;&lt;span&gt;&#39;</span> <span class="o">+</span> <span class="nx">word</span> <span class="o">+</span> <span class="s1">&#39;&lt;/span&gt;&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">word</span>
          <span class="p">);</span>
          <span class="nx">tooltip</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">({</span>
            <span class="s1">&#39;left&#39;</span><span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">left</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
            <span class="s1">&#39;top&#39;</span><span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">top</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offsetHeight</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">),</span>
          <span class="p">});</span>
          <span class="nx">tooltip</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}),</span> <span class="nx">DELAY_INTERVAL</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">onWordMouseOut</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">isMouseInWord</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isMouseInWord</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">tooltip</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}),</span> <span class="nx">DELAY_INTERVAL</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">elm</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">elm</span><span class="p">.</span><span class="nx">onmouseover</span> <span class="o">=</span> <span class="nx">onWordMouseOver</span><span class="p">;</span>
      <span class="nx">elm</span><span class="p">.</span><span class="nx">onmouseout</span> <span class="o">=</span> <span class="nx">onWordMouseOut</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">serviceInstance</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">add</span><span class="o">:</span> <span class="nx">add</span> <span class="p">};</span>
    <span class="k">return</span> <span class="nx">serviceInstance</span><span class="p">;</span>
  <span class="p">}]);</span>
</pre></div>
</td></tr></table></div></figure>
<figure class="github-file">
            <figcaption>
              <a href="https://github.com/siongui/userpages/blob/master/content/code/angularjs-wrap-words/tooltip.css">tooltip.css</a> |
              <a href="https://github.com/siongui/userpages">repository</a> |
              <a href="https://raw.githubusercontent.com/siongui/userpages/master/content/code/angularjs-wrap-words/tooltip.css">view raw</a>
            </figcaption><div class="code-file">
            <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">/**</span>
<span class="c"> * keyword: css long word force line break</span>
<span class="c"> * http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap</span>
<span class="c"> */</span>
<span class="p">.</span><span class="nc">tooltip</span> <span class="p">{</span>
  <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
  <span class="k">left</span><span class="p">:</span> <span class="mi">-9999</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#CCFFFF</span><span class="p">;</span>
  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">font-family</span><span class="p">:</span> <span class="n">Tahoma</span><span class="p">,</span> <span class="n">Arial</span><span class="p">,</span> <span class="kc">serif</span><span class="p">;</span>
  <span class="k">word-wrap</span><span class="p">:</span> <span class="kc">break-word</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></figure>
<hr class="docutils" />
<p>Tested on: <tt class="docutils literal">Chromium Version 50.0.2661.102 Ubuntu 16.04 <span class="pre">(64-bit)</span></tt>, <tt class="docutils literal">AngularJS 1.5.5</tt>.</p>
<hr class="docutils" />
<p>References:</p>
<table class="docutils footnote" frame="void" id="id1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><a class="reference external" href="/2016/05/26/angularjs-tooltip/">[AngularJS] Tooltip</a></td></tr>
</tbody>
</table>
</div>

    <footer><hr><address><b>Author</b>:
    <a rel="author"
       href="/author/siong-ui-te.html">Siong-Ui Te</a>
  </address><aside>
    <i>&isin;</i> <b>Category</b>:
    <a href="/category/angularjs.html">AngularJS</a>
  </aside><aside>
    <i>&sum;</i> <b>Tags</b>:
      <a href="/tag/angularjs.html">AngularJS</a>
,       <a href="/tag/javascript.html">JavaScript</a>
,       <a href="/tag/directives.html">Directives</a>
,       <a href="/tag/regular-expression.html">Regular Expression</a>
,       <a href="/tag/tooltip.html">Tooltip</a>
  </aside></footer>
  </article>
</main>
</div>
<div class="layout-footer">Powered by
  <a href="https://pages.github.com/">Github Pages</a>,
  <a href="http://blog.getpelican.com/">Pelican</a>,
  <a href="https://github.com/Kronuz/pyScss">pyScss</a>.
</div>
<script>
  (function() {
    var cx = '000759460633137666077:43yuu4nvb0c';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-31712770-3', 'auto');
  ga('send', 'pageview');

</script><script>
navigator.serviceWorker && navigator.serviceWorker.register('/sw.js').then(function(registration) {
  console.log('Excellent, registered with scope: ', registration.scope);
});
</script></body>
</html>